(this.webpackJsonptickets=this.webpackJsonptickets||[]).push([[0],{198:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),i=c(12),s=c.n(i),a=(c(92),c(21)),l=c.p+"static/media/logo.6ce24c58.svg",o=c(10);c(96);var d=c(202),j=c(1),b=function(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e)};function u(e){var t=e.ticket,c=t.company,n=void 0===c?"":c,r=t.price,i=void 0===r?0:r,s=t.transfers,a=void 0===s?0:s;return Object(j.jsx)(d.a,{className:"m-3",children:Object(j.jsxs)(d.a.Body,{children:[Object(j.jsxs)("div",{className:"col d-flex justify-content-between",children:[Object(j.jsxs)("div",{className:"text-left",children:[Object(j.jsx)("strong",{children:"Price: "}),b(i)]}),Object(j.jsx)("div",{className:"text-right",children:n})]}),Object(j.jsxs)("div",{className:"col text-left",children:[Object(j.jsx)("strong",{children:"Number of transfers: "}),Object(j.jsx)("span",{children:a})]})]})})}var h=Object(o.b)((function(e){return{tickets:e.displayedTickets}}))((function(e){var t=e.tickets;return e.dispatch,t.length?t.map((function(e,t){return Object(j.jsx)(u,{ticket:e},t)})):Object(j.jsx)("div",{className:"text-center",children:"There is no tickets available"})})),O=c(200),f=c(201),p=c(203),x=c(29),v=c(86),m="ADD_TICKET",g="CHANGE_FILTER",k="CHANGE_SORTING",y=function(e){return function(e){var t=localStorage.getItem("ticketsList")?JSON.parse(localStorage.getItem("ticketsList")):[];t.push(e),localStorage.setItem("ticketsList",JSON.stringify(t))}(e),{type:m,ticket:e}},C=function(e){return{type:k,sorting:e}};var N=Object(o.b)()((function(e){var t=e.show,c=e.handleClose,n=e.dispatch,r=x.b({company:x.c().required(),price:x.a().test("is-money","not a money pattern",(function(e){return(e+"").match(/^[0-9]+(\.[0-9]{1,2})?$/)})).required(),transfers:x.a().integer().min(0).max(3).required()});return Object(j.jsxs)(O.a,{show:t,onHide:c,children:[Object(j.jsx)(O.a.Header,{closeButton:!0,children:Object(j.jsx)(O.a.Title,{children:"Add Ticket"})}),Object(j.jsx)(v.a,{enableReinitialize:!0,initialValues:{company:"Utair",price:"",transfers:0},validationSchema:r,onSubmit:function(e,t){var c=t.resetForm;n(y(e)),c()},children:function(e){var t=e.handleSubmit,n=e.handleChange,r=e.values,i=(e.touched,e.isValid,e.errors);return Object(j.jsxs)(f.a,{noValidate:!0,onSubmit:t,children:[Object(j.jsxs)(O.a.Body,{children:[Object(j.jsxs)(f.a.Group,{controlId:"companyId",children:[Object(j.jsx)(f.a.Label,{children:"Company"}),Object(j.jsxs)(f.a.Control,{required:!0,as:"select",name:"company",value:r.company,isInvalid:!!i.company,onChange:n,children:[Object(j.jsx)("option",{value:"Utair",children:"Utair"},1),Object(j.jsx)("option",{value:"Aeroflot",children:"Aeroflot"},2),Object(j.jsx)("option",{value:"NordWind",children:"NordWind"},3)]}),Object(j.jsx)(f.a.Control.Feedback,{type:"invalid",children:i.company})]}),Object(j.jsxs)(f.a.Group,{controlId:"priceId",children:[Object(j.jsx)(f.a.Label,{children:"Price"}),Object(j.jsx)(f.a.Control,{required:!0,isInvalid:!!i.price,value:r.price,onChange:n,name:"price"}),Object(j.jsx)(f.a.Control.Feedback,{type:"invalid",children:i.price})]}),Object(j.jsxs)(f.a.Group,{controlId:"transfersId",children:[Object(j.jsx)(f.a.Label,{children:"Number of Transfers"}),Object(j.jsxs)(f.a.Control,{required:!0,as:"select",isInvalid:!!i.transfers,value:r.transfers,onChange:n,name:"transfers",children:[Object(j.jsx)("option",{value:"0",children:"Direct Flight"}),Object(j.jsx)("option",{value:"1",children:"1 Transfer"}),Object(j.jsx)("option",{value:"2",children:"2 Transfers"}),Object(j.jsx)("option",{value:"3",children:"3 Transfers"})]}),Object(j.jsx)(f.a.Control.Feedback,{type:"invalid",children:i.transfers})]})]}),Object(j.jsxs)(O.a.Footer,{children:[Object(j.jsx)(p.a,{variant:"primary",type:"submit",children:"Save"}),Object(j.jsx)(p.a,{variant:"secondary",onClick:c,children:"Close"})]})]})}})]})}));var I=c(8),T="price_asc",S="price_desc",A="all",F=localStorage.getItem("ticketsList")?JSON.parse(localStorage.getItem("ticketsList")):[],w={tickets:Object(I.a)(F),sorting:T,filters:[A]};var L=Object(o.b)((function(e){return{sorting:e.sorting}}))((function(e){var t=e.sorting,c=e.dispatch;return Object(j.jsxs)("div",{className:"col d-flex justify-content-between",children:[Object(j.jsx)(p.a,{variant:t===T?"primary":"outline-primary",onClick:function(){return c(C(T))},children:"Order by Price Ascending"}),Object(j.jsx)(p.a,{variant:t===S?"primary":"outline-primary",onClick:function(){return c(C(S))},children:"Order by Price Descending"})]})}));var B=Object(o.b)((function(e){return{filters:e.filters}}))((function(e){var t=e.filters,c=e.dispatch;console.log(t);var n=function(e){c(function(e){return{type:g,filter:e}}(e))};return Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)(d.a,{children:[Object(j.jsx)(d.a.Header,{children:"Filter:"}),Object(j.jsxs)(d.a.Body,{className:"text-left",children:[Object(j.jsx)(f.a.Check,{type:"checkbox",value:"all",label:"All",checked:t.includes(A),onChange:function(){return n(A)}}),Object(j.jsx)(f.a.Check,{type:"checkbox",label:"No transfers",checked:t.includes(0),onChange:function(){return n(0)}}),Object(j.jsx)(f.a.Check,{type:"checkbox",label:"1 Transfer",checked:t.includes(1),onChange:function(){return n(1)}}),Object(j.jsx)(f.a.Check,{type:"checkbox",label:"2 Transfers",checked:t.includes(2),onChange:function(){return n(2)}}),Object(j.jsx)(f.a.Check,{type:"checkbox",label:"3 Transfers",checked:t.includes(3),onChange:function(){return n(3)}})]})]})})}));var q=Object(o.b)()((function(){var e=Object(n.useState)(!1),t=Object(a.a)(e,2),c=t[0],r=t[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(N,{handleClose:function(){return r(!1)},show:c}),Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("img",{src:l,className:"App-logo",alt:"logo"})}),Object(j.jsxs)("div",{className:"App-container container",children:[Object(j.jsx)("button",{className:"btn btn-info",onClick:function(){return r(!0)},children:"Add Ticket"}),Object(j.jsxs)("div",{className:"row mt-4",children:[Object(j.jsx)("div",{className:"col-md-3 filters-row",children:Object(j.jsx)(B,{})}),Object(j.jsxs)("div",{className:"col-md-9",children:[Object(j.jsx)(L,{}),Object(j.jsx)(h,{})]})]})]})]})})),E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,204)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),i(e),s(e)}))},G=c(37),P=c(14),D=function(e,t){return e.sort((function(e,c){return t===T?e.price-c.price:c.price-e.price}))},H=function(e,t){return t!==A||e.includes(A)?(e.includes(t)?e.splice(e.indexOf(t),1):(e.push(t),e.includes(A)&&e.splice(e.indexOf(A),1)),e.length||e.push(A),Object(I.a)(e)):[A]},J=function(e,t){var c=[];return t.includes(A)?Object(I.a)(e):(t.forEach((function(t){c=c.concat(e.filter((function(e){return parseInt(e.transfers)===t})))})),c)};c(197);var R=Object(G.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,c={};switch(t.type){case m:c=Object(P.a)(Object(P.a)({},e),{},{tickets:[].concat(Object(I.a)(e.tickets),[t.ticket])});break;case g:var n=H(e.filters,t.filter);c=Object(P.a)(Object(P.a)({},e),{},{filters:Object(I.a)(n)});break;case k:c=Object(P.a)(Object(P.a)({},e),{},{sorting:t.sorting});break;default:c=Object(P.a)({},e)}return Object(P.a)(Object(P.a)({},c),{},{displayedTickets:D(J(c.tickets,c.filters),c.sorting)})}));s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(o.a,{store:R,children:Object(j.jsx)(q,{})})}),document.getElementById("root")),E()},92:function(e,t,c){},96:function(e,t,c){}},[[198,1,2]]]);
//# sourceMappingURL=main.64dce04c.chunk.js.map